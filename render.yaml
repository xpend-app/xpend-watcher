services:
    - type: worker
      name: queue
      region: frankfurt
      env: node
      buildCommand: "pip install -r requirements.txt"
      startCommand: "celery --app tasks worker --loglevel info --concurrency 4"
      envVars:
          - key: QUEUE_BROKER_URL
            fromService:
                name: xpend-queue-broker
                type: redis
                property: connectionString
    - type: redis
      name: xpend-queue-broker
      region: frankfurt
      maxmemoryPolicy: noeviction # recommended policy for queues
      ipAllowList: [] # only allow internal connections
